!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(a,r){function t(e){var t=(e=e||document.querySelector(".pswp__button--caption--ctrl")).parentNode,n=t.querySelector(".pswp__caption__center"),o=B(t);e.classList.contains("pswp__button--caption--ctrl--expand")?(o.naturalCaptionHeight<o.maxExpandedCaptionHeight?A.style.height=o.naturalCaptionHeight+"px":(A.style.height=o.maxExpandedCaptionHeight+"px",n.style.overflowY="auto"),e.classList.remove("pswp__button--caption--ctrl--expand"),e.classList.add("pswp__button--caption--ctrl--collapse"),e.setAttribute("title","Collapse caption"),n.classList.remove("collapsed"),n.classList.add("expanded"),n.setAttribute("aria-expanded","true")):(H.style.height=o.maxCollapsedCaptionHeight+"px",e.classList.add("pswp__button--caption--ctrl--expand"),e.classList.remove("pswp__button--caption--ctrl--collapse"),e.setAttribute("title","Expand caption"),n.style.overflowY="hidden",n.classList.remove("expanded"),n.classList.add("collapsed"),n.setAttribute("aria-expanded","false"))}function e(e){if(K)return!0;e=e||window.event,R.timeToIdle&&R.mouseUsed&&!E&&V();for(var t,n,o,a=e.target||e.srcElement,i=a.getAttribute("class")||"",l=0;l<J.length;l++)(t=J[l]).onTap&&-1<i.indexOf("pswp__"+t.name)&&(t.onTap(a),n=!0);a.closest(".pswp__caption__center")&&(n=!0),n&&(e.stopPropagation&&e.stopPropagation(),K=!0,o=r.features.isOldAndroid?600:30,setTimeout(function(){K=!1},o))}function n(e,t,n){r[(n?"add":"remove")+"Class"](e,"pswp__"+t)}function o(){var e=1===R.getNumItemsFn();e!==O&&(n(h,"ui--one-slide",e),O=e)}function i(){n(I,"share-modal--hidden",P)}function l(){return(P=!P)?(r.removeClass(I,"pswp__share-modal--fade-in"),setTimeout(function(){P&&i()},300)):(i(),setTimeout(function(){P||r.addClass(I,"pswp__share-modal--fade-in")},30)),P||G(),0}function s(e){var t=(e=e||window.event).target||e.srcElement;return a.shout("shareLinkClick",e,t),!!t.href&&(!!t.hasAttribute("download")||(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),P||l(),!1))}function c(e){for(var t=0;t<R.closeElClasses.length;t++)if(r.hasClass(e,"pswp__"+R.closeElClasses[t]))return!0}function p(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(D),D=setTimeout(function(){z.setIdle(!0)},R.timeToIdleOutside))}function u(e){var t,n=e.vGap,o=R.barsSize;!a.likelyTouchDevice||R.mouseUsed||screen.width>R.fitControlsWidth||R.allowLongCaptions?(o=R.barsSize,R.captionEl&&"auto"===o.bottom?(f||((f=r.createElement("pswp__caption pswp__caption--fake")).appendChild(r.createElement("pswp__caption__center")),h.insertBefore(f,w),r.addClass(h,"pswp__ui--fit")),R.addCaptionHTMLFn(e,f)?(t=f.clientHeight,n.bottom=parseInt(t,10)||44):n.bottom=o.top):n.bottom="auto"===o.bottom?0:o.bottom,n.top=o.top):n.top=n.bottom=0}function d(){var e;(e=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(e);var t=(k=e.sheet).insertRule(".pswp__caption__center.expanded {}",k.cssRules.length),n=k.insertRule(".pswp__caption__center.collapsed {}",k.cssRules.length);A=k.cssRules.item(t),H=k.cssRules.item(n),k.insertRule(".pswp__caption__center { width: 100%; max-width: 720px; }",k.cssRules.length)}function m(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){a=e[n],i=a.className;for(var o=0;o<J.length;o++)l=J[o],-1<i.indexOf("pswp__"+l.name)&&(R[l.option]?(r.removeClass(a,"pswp__element--disabled"),l.onInit&&l.onInit(a)):r.addClass(a,"pswp__element--disabled"))}}var a,i,l;e(h.children);var t,n,o,s=r.getChildByClass(h,"pswp__top-bar");s&&e(s.children),(o=document.querySelector(".pswp__caption")).querySelector(".pswp__button--caption--ctrl")||(t=document.createElement("button"),n=o.querySelector(".pswp__caption__center"),t.setAttribute("class","pswp__button pswp__button--caption--ctrl"),t.setAttribute("id","pswp__button--caption--ctrl"),t.setAttribute("title","Expand caption"),o.insertBefore(t,n))}var _,h,w,f,g,b,C,v,I,T,x,E,F,L,S,y,O,k,A,H,R,K,q,D,z=this,N=!1,M=!0,P=!0,U={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){var n,o,a,i,l=t.querySelector(".pswp__caption__center");return e.title?(l.innerHTML=e.title,R.allowLongCaptions&&(n=e.vGap.top,o=l.clientHeight,a=document.querySelector(".pswp__button--caption--ctrl"),z.resetCaption(),Z(t,0,1024,n,o),o-10>(i=B(t)).maxCollapsedCaptionHeight?(a.classList.add("pswp__button--caption--ctrl--expand"),a.setAttribute("aria-controls","pswp__caption__center"),l.setAttribute("aria-expanded","false")):W(a),H.style.height=i.maxCollapsedCaptionHeight+"px",l.classList.add("collapsed")),!0):(l.innerHTML="",!1)},closeEl:!0,captionEl:!0,allowLongCaptions:!1,fullscreenEl:!0,zoomEl:!0,shareEl:!0,downloadEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,closeOnOutsideClick:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,clickToShowNextNonZoomable:!1,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},Z=function(e,t,n,o,a){e.dataset.imagePositionTop=t,e.dataset.apparentImageHeight=n,e.dataset.gapTop=o,e.dataset.naturalCaptionHeight=a},B=function(e){var t={};t.gapTop=parseInt(e.dataset.gapTop,10),t.imagePositionTop=parseInt(e.dataset.imagePositionTop,10),t.apparentImageHeight=parseInt(e.dataset.apparentImageHeight,10),t.naturalCaptionHeight=parseInt(e.dataset.naturalCaptionHeight,10);var n=t.imagePositionTop+t.apparentImageHeight;return t.maxCollapsedCaptionHeight=window.innerHeight-n,t.maxExpandedCaptionHeight=window.innerHeight-t.gapTop,t},W=function(e){(e=e||a.scrollWrap.querySelector(".pswp__button--caption--ctrl")).classList.remove("pswp__button--caption--ctrl--expand"),e.classList.remove("pswp__button--caption--ctrl--collapse"),e.removeAttribute("aria-controls");var t=e.parentNode.querySelector(".pswp__caption__center");t.removeAttribute("aria-expanded"),t.classList.remove("expanded"),t.classList.remove("collapsed"),A.style.height="auto",H.style.height="auto"},G=function(){for(var e,t,n,o,a="",i=0;i<R.shareButtons.length;i++)e=R.shareButtons[i],t=R.getImageURLForShare(e),n=R.getPageURLForShare(e),o=R.getTextForShare(e),a+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",R.parseShareButtonOut&&(a=R.parseShareButtonOut(e,a));I.children[0].innerHTML=a,I.children[0].onclick=s},Y=0,V=function(){clearTimeout(D),Y=0,E&&z.setIdle(!1)},j=function(e){S!==e&&(n(L,"preloader--active",!e),S=e)},J=[{name:"caption",option:"captionEl",onInit:function(e){w=e}},{name:"share-modal",option:"shareEl",onInit:function(e){I=e},onTap:function(){l()}},{name:"button--share",option:"shareEl",onInit:function(e){v=e},onTap:function(){l()}},{name:"button--download",option:"downloadEl",onInit:function(e){T=e},onTap:function(){var e=document.createElement("A");e.setAttribute("href",a.currItem.downloadURL||a.currItem.src||""),e.setAttribute("target","_blank"),e.setAttribute("download",""),T.appendChild(e),e.click(),T.removeChild(e)}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){g=e}},{name:"button--close",option:"closeEl",onTap:function(){setTimeout(a.close)}},{name:"button--arrow--left",option:"arrowEl",onInit:function(e){b=e},onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onInit:function(e){C=e},onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){_.isFullscreen()?_.exit():_.enter()}},{name:"button--caption--ctrl",option:"allowLongCaptions",onTap:function(e){t(e)}},{name:"preloader",option:"preloaderEl",onInit:function(e){L=e}}];z.init=function(){var t;r.extend(a.options,U,!0),R=a.options,h=r.getChildByClass(a.scrollWrap,"pswp__ui"),F=a.listen,R.closeOnScroll&&(console.info("FYI: Resetting _options.closeOnScroll to false because _options.allowLongCaptions is true."),R.closeOnScroll=!1),R.closeOnVerticalDrag&&(console.info("FYI: Resetting _options.closeOnVerticalDrag to false because _options.allowLongCaptions is true."),R.closeOnVerticalDrag=!1),F("onVerticalDrag",function(e){R.allowLongCaptions||(M&&e<.95?z.hideControls():!M&&.95<=e&&z.showControls())}),F("onPinchClose",function(e){M&&e<.9?(z.hideControls(),t=!0):t&&!M&&.9<e&&z.showControls()}),F("zoomGestureEnded",function(){(t=!1)&&!M&&z.showControls()}),F("beforeChange",z.update),F("doubleTap",function(e){var t=a.currItem.initialZoomLevel;a.getZoomLevel()!==t?a.zoomTo(t,e,333):a.zoomTo(R.getDoubleTapZoom(!1,a.currItem),e,333)}),F("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),F("bindEvents",function(){r.bind(h,"pswpTap click",e),r.bind(a.scrollWrap,"pswpTap",z.onGlobalTap),a.likelyTouchDevice||r.bind(a.scrollWrap,"mouseover",z.onMouseOver)}),F("unbindEvents",function(){P||l(),q&&clearInterval(q),r.unbind(document,"mouseout",p),r.unbind(document,"mousemove",V),r.unbind(h,"pswpTap click",e),r.unbind(a.scrollWrap,"pswpTap",z.onGlobalTap),r.unbind(a.scrollWrap,"mouseover",z.onMouseOver),_&&(r.unbind(document,_.eventK,z.updateFullscreen),_.isFullscreen()&&(R.hideAnimationDuration=0,_.exit()),_=null)}),F("destroy",function(){R.captionEl&&(f&&h.removeChild(f),r.removeClass(w,"pswp__caption--empty")),I&&(I.children[0].onclick=null),r.removeClass(h,"pswp__ui--over-close"),r.addClass(h,"pswp__ui--hidden"),z.setIdle(!1)}),R.showAnimationDuration||r.removeClass(h,"pswp__ui--hidden"),F("initialZoomIn",function(){R.showAnimationDuration&&r.removeClass(h,"pswp__ui--hidden")}),F("initialZoomOut",function(){r.addClass(h,"pswp__ui--hidden")}),F("parseVerticalMargin",u),m(),R.shareEl&&v&&I&&(P=!0),o(),R.timeToIdle&&F("mouseUsed",function(){r.bind(document,"mousemove",V),r.bind(document,"mouseout",p),q=setInterval(function(){2===++Y&&z.setIdle(!0)},R.timeToIdle/2)}),R.fullscreenEl&&!r.features.isOldAndroid&&((_=_||z.getFullscreenAPI())?(r.bind(document,_.eventK,z.updateFullscreen),z.updateFullscreen(),r.addClass(a.template,"pswp--supports-fs")):r.removeClass(a.template,"pswp--supports-fs")),R.preloaderEl&&(j(!0),F("beforeChange",function(){clearTimeout(y),y=setTimeout(function(){a.currItem&&a.currItem.loading?a.allowProgressiveImg()&&(!a.currItem.img||a.currItem.img.naturalWidth)||j(!1):j(!0)},R.loadingIndicatorDelay)}),F("imageLoadComplete",function(e,t){a.currItem===t&&j(!0)})),R.allowLongCaptions&&d()},z.setIdle=function(e){n(h,"ui--idle",E=e)},z.update=function(){N=!(!M||!a.currItem)&&(z.updateIndexIndicator(),R.captionEl&&(R.addCaptionHTMLFn(a.currItem,w),n(w,"caption--empty",!a.currItem.title)),!0),P||l(),o()},z.updateFullscreen=function(e){e&&setTimeout(function(){a.setScrollOffset(0,r.getScrollY())},50),r[(_.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},z.updateIndexIndicator=function(){R.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+R.indexIndicatorSep+R.getNumItemsFn()),R.loop||(0===a.getCurrentIndex()?r.addClass(b,"pswp__element--disabled"):r.removeClass(b,"pswp__element--disabled"),a.getCurrentIndex()===R.getNumItemsFn()-1?r.addClass(C,"pswp__element--disabled"):r.removeClass(C,"pswp__element--disabled"))},z.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!K)if(e.detail&&"mouse"===e.detail.pointerType){if(!e.detail.rightClick){if(R.closeOnOutsideClick&&c(t))return void a.close();r.hasClass(t,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?R.clickToCloseNonZoomable?a.close():R.clickToShowNextNonZoomable&&a.next():a.toggleDesktopZoom(e.detail.releasePoint))}}else{var n=t.closest(".pswp__caption");if(R.tapToToggleControls&&!n&&(M?z.hideControls():z.showControls()),R.tapToClose&&(r.hasClass(t,"pswp__img")||R.closeOnOutsideClick&&c(t)))return void a.close()}},z.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;n(h,"ui--over-close",c(t))},z.hideControls=function(){r.addClass(h,"pswp__ui--hidden"),M=!1},z.showControls=function(){M=!0,N||z.update(),r.removeClass(h,"pswp__ui--hidden")},z.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},z.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(x=R.closeOnScroll,R.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return a.template[this.enterK]();a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return R.closeOnScroll=x,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e},z.toggleCaption=function(e){t(e)},z.resetCaption=function(e){W(e)}}});